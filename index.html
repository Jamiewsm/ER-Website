<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ER - Enneagram For Restoration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Neutrals (Stone, Sand, Muted Earth) -->
    <!-- Application Structure Plan: 
         1. Hero: Brand Identity & Vision (Restoration).
         2. About: Founder & Philosophy (Trust building).
         3. Interactive Program Finder: Dynamic filtering for Individuals, Church, Business (Context switching).
         4. Impact & Stories: Data visualization of clinical cases + Testimonials.
         5. Resources & Training: Lead magnet section.
         6. Apply/Contact: Conversion point (Inquiry based, no payment gateway).
         7. My Page: Login simulation. 
         Rationale: The structure guides the user from 'Who we are' to 'What fits me' to 'Evidence of success' to 'Action'.
    -->
    <!-- Visualization & Content Choices:
         1. Clinical Experience Stats -> Goal: Proof of Competence -> Method: Bar Chart (Chart.js) -> Interaction: Hover for exact counts.
         2. The 9 Types Spectrum -> Goal: Visual Engagement -> Method: Polar Area Chart (Chart.js) -> Interaction: Click segment to see keywords.
         3. Program Steps -> Goal: Process Clarity -> Method: HTML/CSS Flexbox Process Flow -> Interaction: None.
         CONFIRMATION: NO SVG graphics used (FontAwesome used via Webfont). NO Mermaid JS used.
    -->

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        er: {
                            base: '#f5f5f0',    /* Warm off-white */
                            primary: '#8c8680', /* Stone Grey */
                            accent: '#bfa68a',  /* Muted Gold/Sand */
                            dark: '#4a4540',    /* Deep Earth */
                            light: '#ffffff'
                        }
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'Malgun Gothic', 'Dotum', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 350px;
            margin: 0 auto;
        }
        .nav-active {
            border-bottom: 2px solid #bfa68a;
            color: #4a4540;
            font-weight: 600;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom scrollbar for gallery */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-er-base text-er-dark antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-er-primary/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" onclick="renderSection('home')" class="text-2xl font-bold text-er-dark tracking-tighter">
                        ER <span class="text-xs font-normal text-er-primary ml-1">Enneagram for Restoration</span>
                    </a>
                </div>
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="renderSection('about')" class="nav-btn text-gray-500 hover:text-er-accent px-3 py-2 text-sm font-medium transition-colors">About ER</button>
                    <button onclick="renderSection('programs')" class="nav-btn text-gray-500 hover:text-er-accent px-3 py-2 text-sm font-medium transition-colors">Programs</button>
                    <button onclick="renderSection('community')" class="nav-btn text-gray-500 hover:text-er-accent px-3 py-2 text-sm font-medium transition-colors">Stories</button>
                    <button onclick="renderSection('resources')" class="nav-btn text-gray-500 hover:text-er-accent px-3 py-2 text-sm font-medium transition-colors">Resources</button>
                    <button onclick="renderSection('apply')" class="bg-er-dark text-white hover:bg-er-primary px-4 py-2 rounded-full text-sm transition-colors shadow-md">상담/강의 문의</button>
                    <button onclick="toggleLogin()" class="text-gray-400 hover:text-er-dark"><i class="fas fa-user-circle text-xl"></i></button>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-gray-500 hover:text-er-dark p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-gray-100">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="renderSection('about')" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-er-dark">About ER</button>
                <button onclick="renderSection('programs')" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-er-dark">Programs</button>
                <button onclick="renderSection('community')" class="block w-full text-left px-3 py-2 text-base font-medium text-gray-600 hover:bg-gray-50 hover:text-er-dark">Stories</button>
                <button onclick="renderSection('apply')" class="block w-full text-left px-3 py-2 text-base font-medium text-er-accent font-bold">문의하기</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="main-content" class="min-h-screen">
        <!-- Dynamic content injected here -->
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-12 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <h3 class="text-lg font-bold text-er-dark mb-4">ER (Enneagram for Restoration)</h3>
                <p class="text-sm text-gray-500 leading-relaxed">
                    본 단체는 비영리 목적으로 운영됩니다.<br>
                    나의 Original Design을 회복하고,<br>
                    공동체를 치유하는 여정에 함께합니다.
                </p>
            </div>
            <div>
                <h4 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">Contact</h4>
                <ul class="space-y-2 text-sm text-gray-500">
                    <li><i class="far fa-envelope w-5"></i> help@er-recovery.org</li>
                    <li><i class="fas fa-map-marker-alt w-5"></i> USA (H4 Visa Status / Non-profit)</li>
                    <li><i class="far fa-clock w-5"></i> Mon-Fri 10:00 - 17:00 (EST)</li>
                </ul>
            </div>
            <div>
                <h4 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">Partners</h4>
                <div class="flex space-x-4 items-center">
                    <span class="text-gray-400 font-serif italic text-lg">SOIM</span>
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 mt-8 pt-8 border-t border-gray-100 text-center text-xs text-gray-400">
            &copy; 2025 ER. All rights reserved. Currently operating as a pilot non-profit program.
        </div>
    </footer>

    <!-- Login Modal (Simulated) -->
    <div id="login-modal" class="fixed inset-0 bg-black/50 z-[100] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-sm w-full p-6 transform transition-all">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-900">회원 로그인</h3>
                <button onclick="toggleLogin()" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">이메일</label>
                    <input type="email" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm" placeholder="user@example.com">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">비밀번호</label>
                    <input type="password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm" placeholder="********">
                </div>
                <button onclick="loginUser()" class="w-full bg-er-dark text-white py-2 px-4 rounded-md hover:bg-gray-800 transition-colors">로그인</button>
                <div class="text-center text-xs text-gray-500 mt-2">
                    <a href="#" class="underline hover:text-er-accent">비밀번호 찾기</a> | 
                    <a href="#" onclick="toggleLogin(); renderSection('apply');" class="underline hover:text-er-accent">회원가입 문의</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- State Management ---
        const state = {
            currentSection: 'home',
            user: null, // null or { name: 'Kim', type: 'Instructor' }
            programFilter: 'individual' // individual, church, business
        };

        // --- Data Store ---
        const contentData = {
            stats: {
                labels: ['개인/가정 회복', '목회자 번아웃', '기업 리더십', '강사 양성', '청소년/기타'],
                data: [45, 25, 15, 10, 5],
                descriptions: [
                    '부부 관계 회복 및 자녀 양육 코칭',
                    '목회자 및 선교사 소명 회복',
                    '강점 기반 팀빌딩 및 갈등 관리',
                    '에니어그램 전문 강사 배출',
                    '청소년 진로 및 기타 상담'
                ]
            },
            types: {
                labels: ['1.개혁가', '2.조력가', '3.성취자', '4.예술가', '5.탐구자', '6.충실가', '7.열정가', '8.도전가', '9.화합가'],
                data: [8, 9, 8, 7, 6, 8, 7, 8, 9] // Aesthetic visualization data
            }
        };

        // --- Core Rendering Functions ---

        function renderSection(sectionId) {
            state.currentSection = sectionId;
            const main = document.getElementById('main-content');
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo(0,0);

            let html = '';

            switch(sectionId) {
                case 'home':
                    html = renderHome();
                    break;
                case 'about':
                    html = renderAbout();
                    break;
                case 'programs':
                    html = renderPrograms();
                    break;
                case 'community':
                    html = renderCommunity();
                    break;
                case 'resources':
                    html = renderResources();
                    break;
                case 'apply':
                    html = renderApply();
                    break;
                case 'mypage':
                    html = renderMyPage();
                    break;
                default:
                    html = renderHome();
            }

            main.innerHTML = html;
            
            // Post-render scripts (Charts)
            if(sectionId === 'home' || sectionId === 'community') {
                initCharts(sectionId);
            }
            if(sectionId === 'programs') {
                updateProgramView(state.programFilter);
            }
        }

        // --- Section Generators ---

        function renderHome() {
            return `
                <!-- Hero Section -->
                <div class="relative bg-er-base overflow-hidden">
                    <div class="max-w-7xl mx-auto">
                        <div class="relative z-10 pb-8 bg-er-base sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                            <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                                <div class="sm:text-center lg:text-left fade-in">
                                    <span class="inline-block py-1 px-3 rounded-full bg-er-accent/20 text-er-dark text-xs font-semibold tracking-wide uppercase mb-4">Non-profit Organization</span>
                                    <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl">
                                        <span class="block xl:inline">Original Design을</span>
                                        <span class="block text-er-accent xl:inline">발견하고 회복합니다</span>
                                    </h1>
                                    <p class="mt-3 text-base text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                                        기독교 세계관과 에니어그램의 통합적 접근을 통해<br>
                                        나 자신을 이해하고, 가정과 공동체를 치유하는<br>
                                        회복의 여정에 당신을 초대합니다.
                                    </p>
                                    <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                                        <div class="rounded-md shadow">
                                            <button onclick="renderSection('programs')" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-er-dark hover:bg-gray-800 md:py-4 md:text-lg md:px-10">
                                                프로그램 보기
                                            </button>
                                        </div>
                                        <div class="mt-3 sm:mt-0 sm:ml-3">
                                            <button onclick="renderSection('apply')" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-er-dark bg-er-accent/20 hover:bg-er-accent/30 md:py-4 md:text-lg md:px-10">
                                                예약 문의하기
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div>
                    <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 bg-gray-100 flex items-center justify-center overflow-hidden">
                         <!-- Abstract representation of Enneagram/Recovery -->
                        <div class="chart-container mt-10 lg:mt-0">
                            <canvas id="heroChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Intro Features -->
                <div class="py-12 bg-white">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="lg:text-center">
                            <h2 class="text-base text-er-accent font-semibold tracking-wide uppercase">Why ER?</h2>
                            <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                                전문성과 진정성 있는 회복
                            </p>
                        </div>
                        <div class="mt-10">
                            <dl class="space-y-10 md:space-y-0 md:grid md:grid-cols-3 md:gap-x-8 md:gap-y-10">
                                <div class="relative">
                                    <dt>
                                        <div class="absolute flex items-center justify-center h-12 w-12 rounded-md bg-er-primary text-white">
                                            <i class="fas fa-graduation-cap"></i>
                                        </div>
                                        <p class="ml-16 text-lg leading-6 font-medium text-gray-900">검증된 전문성</p>
                                    </dt>
                                    <dd class="mt-2 ml-16 text-base text-gray-500">
                                        IEA(국제에니어그램협회) 인증 강사인 설립자와 전문 코치진이 함께합니다.
                                    </dd>
                                </div>
                                <div class="relative">
                                    <dt>
                                        <div class="absolute flex items-center justify-center h-12 w-12 rounded-md bg-er-primary text-white">
                                            <i class="fas fa-church"></i>
                                        </div>
                                        <p class="ml-16 text-lg leading-6 font-medium text-gray-900">통합적 접근</p>
                                    </dt>
                                    <dd class="mt-2 ml-16 text-base text-gray-500">
                                        기독교적 영성과 심리학적 도구를 통합하여 단순한 유형 찾기를 넘어선 전인적 회복을 지향합니다.
                                    </dd>
                                </div>
                                <div class="relative">
                                    <dt>
                                        <div class="absolute flex items-center justify-center h-12 w-12 rounded-md bg-er-primary text-white">
                                            <i class="fas fa-hand-holding-heart"></i>
                                        </div>
                                        <p class="ml-16 text-lg leading-6 font-medium text-gray-900">비영리 가치</p>
                                    </dt>
                                    <dd class="mt-2 ml-16 text-base text-gray-500">
                                        상업적 이익보다 사람의 회복을 최우선으로 하며, 자발적 후원과 재능 기부로 운영됩니다.
                                    </dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAbout() {
            return `
                <div class="bg-white py-16 px-4 sm:px-6 lg:px-8">
                    <div class="max-w-7xl mx-auto">
                        <!-- Vision -->
                        <div class="text-center mb-16 fade-in">
                            <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl mb-4">Vision & Mission</h2>
                            <p class="max-w-2xl mx-auto text-xl text-gray-500">
                                "나의 Original Design을 발견하고 회복한다.<br>또한 타인을 이해하고 품어 공동체를 회복한다."
                            </p>
                        </div>

                        <!-- Founder -->
                        <div class="lg:grid lg:grid-cols-2 lg:gap-8 items-center mb-20 bg-er-base rounded-2xl p-8 lg:p-12 fade-in">
                            <div class="mb-8 lg:mb-0">
                                <div class="w-48 h-48 bg-gray-300 rounded-full mx-auto lg:mx-0 mb-6 flex items-center justify-center text-gray-500 text-5xl">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 text-center lg:text-left">설립자 프로필</h3>
                                <p class="text-er-accent text-center lg:text-left font-medium mb-4">IEA Certified Instructor</p>
                            </div>
                            <div>
                                <ul class="space-y-4 text-gray-600">
                                    <li class="flex items-start">
                                        <i class="fas fa-check text-er-accent mt-1 mr-3"></i>
                                        <span>DTS 상담학 석사 과정 (Master of Counseling)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check text-er-accent mt-1 mr-3"></i>
                                        <span>국제 에니어그램 협회(IEA) 인증 전문가</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check text-er-accent mt-1 mr-3"></i>
                                        <span>에니어그램 스펙트럼 강사 자격 보유</span>
                                    </li>
                                </ul>
                                <blockquote class="mt-8 border-l-4 border-er-accent pl-4 italic text-gray-500">
                                    "진정한 회복은 나를 있는 그대로 바라보는 용기에서 시작됩니다."
                                </blockquote>
                            </div>
                        </div>

                        <!-- Coaches Grid -->
                        <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">함께하는 코치진 (Our Coaches)</h3>
                        <div class="grid grid-cols-1 gap-12 lg:grid-cols-3 lg:gap-8 fade-in">
                            <!-- Coach 1 -->
                            <div class="space-y-4 text-center">
                                <div class="mx-auto h-32 w-32 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400">Coach A</div>
                                <div class="space-y-2">
                                    <div class="text-lg leading-6 font-medium space-y-1">
                                        <h3>김은혜 코치</h3>
                                        <p class="text-er-accent text-sm">가정 사역 전문</p>
                                    </div>
                                    <div class="text-sm text-gray-500">
                                        <p>가족 치료사 자격 보유</p>
                                        <p>부부/자녀 관계 워크숍 50회 이상 진행</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Coach 2 -->
                            <div class="space-y-4 text-center">
                                <div class="mx-auto h-32 w-32 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400">Coach B</div>
                                <div class="space-y-2">
                                    <div class="text-lg leading-6 font-medium space-y-1">
                                        <h3>이진수 코치</h3>
                                        <p class="text-er-accent text-sm">비즈니스 코칭 전문</p>
                                    </div>
                                    <div class="text-sm text-gray-500">
                                        <p>전 대기업 HR 팀장</p>
                                        <p>조직 갈등 관리 및 리더십 코칭</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Coach 3 -->
                            <div class="space-y-4 text-center">
                                <div class="mx-auto h-32 w-32 rounded-full bg-gray-200 flex items-center justify-center text-2xl text-gray-400">Coach C</div>
                                <div class="space-y-2">
                                    <div class="text-lg leading-6 font-medium space-y-1">
                                        <h3>박성민 코치</h3>
                                        <p class="text-er-accent text-sm">영성 지도 및 수퍼비전</p>
                                    </div>
                                    <div class="text-sm text-gray-500">
                                        <p>목회학 박사 (D.Min)</p>
                                        <p>목회자 번아웃 상담 및 멘토링</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                         <!-- Partners -->
                         <div class="mt-20 pt-10 border-t border-gray-100 text-center">
                            <p class="text-sm font-semibold text-gray-400 tracking-wider uppercase mb-6">Partnership</p>
                            <div class="flex justify-center space-x-12 opacity-50 grayscale hover:grayscale-0 transition-all">
                                <div class="flex flex-col items-center">
                                    <span class="text-2xl font-serif font-bold text-gray-600">So-im</span>
                                    <span class="text-xs text-gray-500">소임 상담 센터</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <span class="text-2xl font-serif font-bold text-gray-600">IEA</span>
                                    <span class="text-xs text-gray-500">국제에니어그램협회</span>
                                </div>
                            </div>
                         </div>
                    </div>
                </div>
            `;
        }

        function renderPrograms() {
            return `
                <div class="bg-white min-h-screen">
                    <!-- Program Header -->
                    <div class="bg-er-base py-12 px-4 sm:px-6 lg:px-8 text-center">
                        <h2 class="text-3xl font-extrabold text-gray-900">맞춤형 프로그램</h2>
                        <p class="mt-4 text-lg text-gray-500">개인, 교회, 기업의 필요에 맞춘 전문화된 커리큘럼을 제공합니다.</p>
                        
                        <!-- Filter Tabs -->
                        <div class="mt-8 flex justify-center space-x-2 md:space-x-4">
                            <button onclick="updateProgramView('individual')" id="tab-individual" class="px-4 py-2 rounded-full text-sm md:text-base font-medium transition-all bg-er-dark text-white shadow-lg">개인/가정</button>
                            <button onclick="updateProgramView('church')" id="tab-church" class="px-4 py-2 rounded-full text-sm md:text-base font-medium text-gray-500 hover:bg-gray-200 transition-all">사역/교회</button>
                            <button onclick="updateProgramView('business')" id="tab-business" class="px-4 py-2 rounded-full text-sm md:text-base font-medium text-gray-500 hover:bg-gray-200 transition-all">비즈니스/조직</button>
                            <button onclick="updateProgramView('training')" id="tab-training" class="px-4 py-2 rounded-full text-sm md:text-base font-medium text-gray-500 hover:bg-gray-200 transition-all">강사 양성</button>
                        </div>
                    </div>

                    <!-- Dynamic Program Content -->
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <!-- Introduction for current section -->
                        <div id="program-intro" class="mb-12 text-center max-w-3xl mx-auto">
                            <!-- JS injected intro -->
                        </div>

                        <!-- Cards Grid -->
                        <div id="program-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 fade-in">
                            <!-- JS injected cards -->
                        </div>

                         <!-- Process Flow (Static for all) -->
                        <div class="mt-20 border-t border-gray-100 pt-12">
                            <h3 class="text-2xl font-bold text-center text-gray-900 mb-10">진행 프로세스</h3>
                            <div class="flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-4">
                                <div class="bg-white border border-gray-200 rounded-lg p-6 w-64 text-center shadow-sm relative">
                                    <div class="text-er-accent text-3xl mb-3"><i class="far fa-file-alt"></i></div>
                                    <h4 class="font-bold mb-2">1. 신청서 작성</h4>
                                    <p class="text-sm text-gray-500">온라인 신청서를 통해<br>니즈를 파악합니다.</p>
                                </div>
                                <div class="hidden md:block text-gray-300"><i class="fas fa-chevron-right"></i></div>
                                <div class="md:hidden text-gray-300"><i class="fas fa-chevron-down"></i></div>
                                
                                <div class="bg-white border border-gray-200 rounded-lg p-6 w-64 text-center shadow-sm">
                                    <div class="text-er-accent text-3xl mb-3"><i class="far fa-comments"></i></div>
                                    <h4 class="font-bold mb-2">2. 사전 인터뷰</h4>
                                    <p class="text-sm text-gray-500">코치와 1:1 상담을 통해<br>방향을 설정합니다.</p>
                                </div>
                                <div class="hidden md:block text-gray-300"><i class="fas fa-chevron-right"></i></div>
                                <div class="md:hidden text-gray-300"><i class="fas fa-chevron-down"></i></div>

                                <div class="bg-white border border-gray-200 rounded-lg p-6 w-64 text-center shadow-sm">
                                    <div class="text-er-accent text-3xl mb-3"><i class="fas fa-chalkboard-teacher"></i></div>
                                    <h4 class="font-bold mb-2">3. 코칭/강의 진행</h4>
                                    <p class="text-sm text-gray-500">맞춤형 커리큘럼으로<br>회복을 시작합니다.</p>
                                </div>
                            </div>
                             <div class="text-center mt-10">
                                <button onclick="renderSection('apply')" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-er-accent hover:bg-yellow-600 transition-colors">
                                    상담/강의 신청하기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateProgramView(filterType) {
            state.programFilter = filterType;
            
            // Update Tab Styles
            ['individual', 'church', 'business', 'training'].forEach(type => {
                const btn = document.getElementById(`tab-${type}`);
                if (type === filterType) {
                    btn.className = "px-4 py-2 rounded-full text-sm md:text-base font-medium transition-all bg-er-dark text-white shadow-lg";
                } else {
                    btn.className = "px-4 py-2 rounded-full text-sm md:text-base font-medium text-gray-500 hover:bg-gray-200 transition-all";
                }
            });

            const introEl = document.getElementById('program-intro');
            const cardsEl = document.getElementById('program-cards');
            
            let introHtml = '';
            let cardsHtml = '';

            if (filterType === 'individual') {
                introHtml = `
                    <h3 class="text-xl font-bold text-er-primary mb-2">나와 가정을 위한 회복</h3>
                    <p class="text-gray-600">나의 성격 유형을 이해하고, 가장 가까운 가족과의 관계를 건강하게 세워가는 과정입니다. <br>진정한 '나'를 만나는 시간입니다.</p>
                `;
                cardsHtml = `
                    ${createProgramCard('기본', '자기 이해와 유형 찾기 (Typing)', '에니어그램 검사와 심층 상담을 통해 나의 고유한 성격 유형을 발견합니다.', 'fas fa-fingerprint')}
                    ${createProgramCard('관계', '부부 관계 회복 코칭', '서로의 다름을 이해하고 갈등의 고리를 끊어 친밀함을 회복합니다.', 'fas fa-heart')}
                    ${createProgramCard('양육', '자녀 양육 코칭', '자녀의 기질을 이해하고 그에 맞는 양육 방식을 코칭합니다.', 'fas fa-child')}
                `;
            } else if (filterType === 'church') {
                introHtml = `
                    <h3 class="text-xl font-bold text-er-primary mb-2">목회자와 교회를 위한 쉼</h3>
                    <p class="text-gray-600">사역의 현장에서 지친 영혼을 돌보고, 소명을 재확인하는 시간입니다.<br>건강한 리더십과 공동체를 세웁니다.</p>
                `;
                cardsHtml = `
                    ${createProgramCard('회복', '목회자/선교사 번아웃 코칭', '탈진한 사역자를 위한 쉼과 회복, 내면의 힘을 기르는 과정입니다.', 'fas fa-cross')}
                    ${createProgramCard('소명', '소명 재발견 워크숍', '하나님이 주신 은사와 기질을 통해 사역의 방향성을 재점검합니다.', 'fas fa-compass')}
                    ${createProgramCard('공동체', '교회 리더십/수련회', '당회, 교사, 소그룹 리더들을 위한 맞춤형 수련회 프로그램을 제공합니다.', 'fas fa-users')}
                `;
            } else if (filterType === 'business') {
                introHtml = `
                    <h3 class="text-xl font-bold text-er-primary mb-2">건강한 조직 문화와 성과</h3>
                    <p class="text-gray-600">구성원의 강점을 발견하고, 효과적인 소통과 협업을 돕습니다.<br>상호 이해를 바탕으로 한 시너지를 창출합니다.</p>
                `;
                cardsHtml = `
                    ${createProgramCard('HR', '강점 기반 채용/배치', '구성원의 성격 유형에 따른 직무 적합성을 분석하여 최적의 팀을 구성합니다.', 'fas fa-briefcase')}
                    ${createProgramCard('소통', '조직 내 소통/갈등 해결', '성격 유형별 의사소통 방식을 이해하여 갈등을 줄이고 협업을 증진합니다.', 'fas fa-handshake')}
                    ${createProgramCard('팀빌딩', '팀 시너지 워크숍', '서로의 다름을 시너지로 바꾸는 체험형 팀빌딩 프로그램입니다.', 'fas fa-layer-group')}
                `;
            } else if (filterType === 'training') {
                introHtml = `
                    <h3 class="text-xl font-bold text-er-primary mb-2">에니어그램 전문가 양성</h3>
                    <p class="text-gray-600">에니어그램의 지혜를 깊이 있게 배우고, 타인을 돕는 전문가로 성장하는 과정입니다.</p>
                `;
                cardsHtml = `
                    ${createProgramCard('자격증', '전문 강사 양성반 (8주)', '에니어그램 이론과 실제, 강의 스킬을 습득하는 전문가 과정입니다.', 'fas fa-chalkboard')}
                    ${createProgramCard('심화', '심화 스터디 그룹', '유형별 심층 탐구 및 임상 사례 연구를 진행합니다.', 'fas fa-book-reader')}
                    ${createProgramCard('멘토링', '수퍼비전 (Supervision)', '상담 사례에 대한 전문가의 피드백과 지도를 받습니다.', 'fas fa-user-md')}
                `;
            }

            introEl.innerHTML = introHtml;
            cardsEl.innerHTML = cardsHtml;
        }

        function createProgramCard(badge, title, desc, icon) {
            return `
                <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="px-6 py-8">
                        <div class="flex items-center justify-between mb-4">
                            <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-er-base text-er-dark">
                                ${badge}
                            </span>
                            <i class="${icon} text-2xl text-er-accent"></i>
                        </div>
                        <h4 class="text-xl font-bold text-gray-900 mb-2">${title}</h4>
                        <p class="text-gray-500 text-sm leading-relaxed">${desc}</p>
                    </div>
                    <div class="bg-gray-50 px-6 py-4">
                        <button onclick="renderSection('apply')" class="text-sm font-medium text-er-dark hover:text-er-accent">문의하기 &rarr;</button>
                    </div>
                </div>
            `;
        }

        function renderCommunity() {
            return `
                <div class="bg-white py-12">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl font-extrabold text-gray-900">회복과 변화의 이야기</h2>
                            <p class="mt-4 text-lg text-gray-500">100건 이상의 임상 경험이 증명하는 ER의 노하우입니다.</p>
                        </div>

                        <!-- Charts Section -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-20 items-center">
                            <div>
                                <h3 class="text-lg font-bold text-gray-900 mb-4 ml-4">상담/코칭 주제별 현황</h3>
                                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                                    <div class="chart-container">
                                        <canvas id="impactChart"></canvas>
                                    </div>
                                </div>
                                <p class="text-sm text-center text-gray-400 mt-2">* 2024년 기준 누적 데이터</p>
                            </div>
                            <div class="space-y-6">
                                <div class="bg-er-base p-6 rounded-lg">
                                    <h4 class="font-bold text-er-dark mb-2">왜 효과적인가?</h4>
                                    <p class="text-gray-600 text-sm leading-relaxed">
                                        단순히 성격을 분류하는 것이 아니라, <span class="font-bold text-er-accent">근본적인 동기(Motivation)</span>를 파악하여 내면의 상처를 치유하기 때문입니다. 기독교적 영성은 이 과정에 깊은 안정감을 더해줍니다.
                                    </p>
                                </div>
                                <!-- Testimonials Slider (Static Layout for Demo) -->
                                <div class="relative bg-white border-l-4 border-er-accent p-6 shadow-sm">
                                    <i class="fas fa-quote-left text-2xl text-gray-200 absolute top-4 left-4"></i>
                                    <p class="text-gray-600 italic mb-4 relative z-10">
                                        "남편과 매일 싸우며 이혼까지 생각했습니다. 에니어그램을 통해 남편이 저를 무시한 게 아니라, 불안해서 확인하려 했다는 걸 알게 되었어요. 이제는 서로의 언어로 대화합니다."
                                    </p>
                                    <div class="flex items-center">
                                        <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-xs">J.H</div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">30대 부부, 서울</p>
                                            <div class="flex text-yellow-400 text-xs">
                                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                 <div class="relative bg-white border-l-4 border-gray-300 p-6 shadow-sm">
                                    <p class="text-gray-600 italic mb-4">
                                        "선교지에서 번아웃되어 귀국했을 때, 제가 실패자처럼 느껴졌습니다. 코칭을 통해 제 기질적 특성을 이해하고, 하나님이 주신 원래의 디자인을 다시 사랑하게 되었습니다."
                                    </p>
                                    <div class="flex items-center">
                                        <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-xs">K.M</div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-900">선교사, 15년차</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery & Notices -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="md:col-span-2">
                                <h3 class="text-xl font-bold text-gray-900 mb-4">Activity Gallery</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-200 h-48 rounded-lg flex items-center justify-center text-gray-400">워크숍 사진 1</div>
                                    <div class="bg-gray-200 h-48 rounded-lg flex items-center justify-center text-gray-400">수련회 사진 2</div>
                                    <div class="bg-gray-200 h-48 rounded-lg flex items-center justify-center text-gray-400">강의 사진 3</div>
                                    <div class="bg-gray-200 h-48 rounded-lg flex items-center justify-center text-gray-400">코칭 사진 4</div>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900 mb-4">공지사항</h3>
                                <div class="bg-white border border-gray-200 rounded-lg divide-y divide-gray-100">
                                    <a href="#" class="block p-4 hover:bg-gray-50">
                                        <span class="text-xs text-er-accent font-bold">모집</span>
                                        <h4 class="text-sm font-medium text-gray-900 mt-1">에니어그램 강사과정 5기 모집</h4>
                                        <p class="text-xs text-gray-500 mt-1">2025.01.15 마감</p>
                                    </a>
                                    <a href="#" class="block p-4 hover:bg-gray-50">
                                        <span class="text-xs text-gray-500 font-bold">안내</span>
                                        <h4 class="text-sm font-medium text-gray-900 mt-1">홈페이지 리뉴얼 및 파일럿 운영</h4>
                                        <p class="text-xs text-gray-500 mt-1">2024.12.20</p>
                                    </a>
                                    <a href="#" class="block p-4 hover:bg-gray-50">
                                        <span class="text-xs text-er-primary font-bold">세미나</span>
                                        <h4 class="text-sm font-medium text-gray-900 mt-1">1월 무료 공개 특강: '불안' 다루기</h4>
                                        <p class="text-xs text-gray-500 mt-1">2025.01.10 예정</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderResources() {
            return `
                <div class="bg-er-base min-h-screen py-12">
                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-10">
                            <h2 class="text-3xl font-extrabold text-gray-900">자료실 (Resources)</h2>
                            <p class="mt-4 text-gray-500">더 깊은 이해를 돕기 위한 칼럼과 추천 자료입니다.</p>
                        </div>

                        <!-- Lead Magnet / Free Content -->
                        <div class="space-y-6">
                            <!-- Column Card -->
                            <div class="bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <i class="fas fa-pen-nib text-er-accent text-xl"></i>
                                        <h3 class="text-lg font-bold text-gray-900">인사이트 칼럼: 에니어그램과 영성</h3>
                                    </div>
                                    <span class="text-xs text-gray-400">2024.12.01</span>
                                </div>
                                <p class="mt-2 text-gray-600 text-sm">기독교적 관점에서 바라본 에니어그램 9가지 유형의 '죄(Sin)'와 '덕목(Virtue)'에 대한 깊이 있는 고찰...</p>
                                <div class="mt-4 text-sm text-er-primary font-medium">더 읽기 &rarr;</div>
                            </div>

                            <!-- Diagnosis Lite -->
                            <div class="bg-er-dark text-white rounded-lg shadow-sm p-6 flex flex-col md:flex-row items-center justify-between">
                                <div class="mb-4 md:mb-0">
                                    <h3 class="text-lg font-bold"><i class="fas fa-clipboard-check mr-2"></i>약식 자가 진단 (Self-Check)</h3>
                                    <p class="text-gray-300 text-sm mt-1">3분 만에 알아보는 나의 중심 에너지 센터(머리/가슴/장) 찾기</p>
                                </div>
                                <button onclick="alert('로그인이 필요한 서비스입니다.')" class="bg-white text-er-dark px-5 py-2 rounded-full text-sm font-bold hover:bg-gray-100 transition-colors">
                                    진단 시작하기
                                </button>
                            </div>

                            <!-- Book List -->
                            <div class="bg-white rounded-lg shadow-sm p-6">
                                <h3 class="text-lg font-bold text-gray-900 mb-4"><i class="fas fa-book mr-2 text-er-accent"></i>추천 도서 목록</h3>
                                <ul class="divide-y divide-gray-100">
                                    <li class="py-3 flex justify-between items-center">
                                        <span class="text-gray-700 text-sm">에니어그램의 지혜 (Don Richard Riso)</span>
                                        <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded">필독서</span>
                                    </li>
                                    <li class="py-3 flex justify-between items-center">
                                        <span class="text-gray-700 text-sm">내면의 감옥에서 벗어나라 (Richard Rohr)</span>
                                        <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded">영성</span>
                                    </li>
                                    <li class="py-3 flex justify-between items-center">
                                        <span class="text-gray-700 text-sm">비폭력 대화 (Marshall B. Rosenberg)</span>
                                        <span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded">소통</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderApply() {
            return `
                <div class="bg-white min-h-screen py-12">
                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-10">
                            <span class="bg-er-accent/10 text-er-accent px-3 py-1 rounded-full text-xs font-bold uppercase">Inquiry</span>
                            <h2 class="text-3xl font-extrabold text-gray-900 mt-4">상담 및 강의 신청</h2>
                            <p class="mt-4 text-gray-500">신청서를 작성해 주시면 담당 코치가 24시간 이내에 연락드립니다.<br>현재 파일럿 기간으로 자발적 후원으로 운영됩니다.</p>
                        </div>

                        <div class="bg-er-base rounded-2xl p-8 mb-10">
                            <h3 class="font-bold text-gray-900 mb-4">진행 절차 안내</h3>
                            <div class="flex justify-between text-sm text-gray-600 text-center">
                                <div class="flex-1">
                                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center mx-auto mb-2 font-bold border border-gray-200">1</div>
                                    신청서 제출
                                </div>
                                <div class="flex-1 self-center border-t border-gray-300 mx-2"></div>
                                <div class="flex-1">
                                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center mx-auto mb-2 font-bold border border-gray-200">2</div>
                                    일정 조율
                                </div>
                                <div class="flex-1 self-center border-t border-gray-300 mx-2"></div>
                                <div class="flex-1">
                                    <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center mx-auto mb-2 font-bold border border-gray-200">3</div>
                                    진행 확정
                                </div>
                            </div>
                        </div>

                        <!-- Form -->
                        <form class="space-y-6 bg-white p-6 rounded-lg border border-gray-200 shadow-sm" onsubmit="event.preventDefault(); alert('신청이 접수되었습니다. 담당자가 곧 연락드리겠습니다.'); renderSection('home');">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">이름 / 담당자명</label>
                                <input type="text" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">연락처 (이메일 또는 전화번호)</label>
                                <input type="text" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">신청 분야</label>
                                <select class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm">
                                    <option>개인/가정 코칭 (부부, 자녀)</option>
                                    <option>교회/사역자 회복 프로그램</option>
                                    <option>비즈니스/조직 워크숍</option>
                                    <option>강사 양성 과정</option>
                                    <option>기타 문의</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">문의 및 요청 내용</label>
                                <textarea rows="4" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-er-accent focus:border-er-accent sm:text-sm" placeholder="현재 상황이나 고민, 원하시는 일정 등을 간단히 적어주세요."></textarea>
                            </div>
                            
                            <div class="bg-gray-50 p-4 rounded text-xs text-gray-500">
                                <p class="mb-2 font-bold"><i class="fas fa-info-circle"></i> 비용 안내</p>
                                <p>ER은 비영리 단체로서 정해진 상업적 요금을 청구하지 않습니다. 상담 및 교육 후 안내해 드리는 계좌로 마음을 담아 후원해 주시면 단체 운영에 큰 도움이 됩니다.</p>
                            </div>

                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-er-dark hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-er-dark transition-colors">
                                신청서 제출하기
                            </button>
                        </form>
                    </div>
                </div>
            `;
        }

        function renderMyPage() {
            return `
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                    <div class="flex items-center justify-between mb-8">
                        <h2 class="text-2xl font-bold text-gray-900">마이페이지</h2>
                        <button onclick="logoutUser()" class="text-sm text-gray-500 hover:text-red-500">로그아웃</button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left Sidebar -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <div class="text-center mb-6">
                                <div class="w-20 h-20 bg-er-primary text-white rounded-full mx-auto flex items-center justify-center text-2xl mb-3">K</div>
                                <h3 class="font-bold">Kim User님</h3>
                                <p class="text-sm text-gray-500">수강생 / 4기</p>
                            </div>
                            <nav class="space-y-2">
                                <a href="#" class="block px-4 py-2 bg-er-base text-er-dark font-medium rounded">내 강의실</a>
                                <a href="#" class="block px-4 py-2 text-gray-600 hover:bg-gray-50 rounded">코칭 리포트 (Private)</a>
                                <a href="#" class="block px-4 py-2 text-gray-600 hover:bg-gray-50 rounded">회원 정보 수정</a>
                            </nav>
                        </div>

                        <!-- Main Content -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Class Material -->
                            <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                <h3 class="text-lg font-bold mb-4 border-b pb-2">수강 중인 과정: 강사 양성반 4기</h3>
                                <ul class="space-y-4">
                                    <li class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-video text-red-500 mr-3"></i>
                                            <div>
                                                <p class="text-sm font-medium">1주차: 에니어그램의 역사와 구조</p>
                                                <p class="text-xs text-gray-400">Zoom 녹화본 (2024.12.10)</p>
                                            </div>
                                        </div>
                                        <button class="text-xs bg-white border border-gray-300 px-3 py-1 rounded hover:bg-gray-100">다시보기</button>
                                    </li>
                                    <li class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <div class="flex items-center">
                                            <i class="fas fa-file-pdf text-red-500 mr-3"></i>
                                            <div>
                                                <p class="text-sm font-medium">2주차 강의안 PDF</p>
                                                <p class="text-xs text-gray-400">힘의 중심과 3가지 자아</p>
                                            </div>
                                        </div>
                                        <button class="text-xs bg-white border border-gray-300 px-3 py-1 rounded hover:bg-gray-100">다운로드</button>
                                    </li>
                                </ul>
                            </div>

                            <!-- Coaching Report -->
                            <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                                <h3 class="text-lg font-bold mb-4 border-b pb-2">나의 코칭 리포트</h3>
                                <div class="text-center py-8 text-gray-500">
                                    <i class="fas fa-lock text-2xl mb-2 text-gray-300"></i>
                                    <p>진행 중인 1:1 코칭 리포트가 없습니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Interaction Logic ---

        function toggleLogin() {
            if (state.user) {
                renderSection('mypage');
            } else {
                const modal = document.getElementById('login-modal');
                modal.classList.toggle('hidden');
            }
        }

        function loginUser() {
            state.user = { name: 'Kim' };
            toggleLogin(); // Close modal
            renderSection('mypage');
        }

        function logoutUser() {
            state.user = null;
            renderSection('home');
        }

        // --- Charts Initialization ---

        function initCharts(sectionId) {
            if (sectionId === 'home') {
                const ctx = document.getElementById('heroChart').getContext('2d');
                new Chart(ctx, {
                    type: 'polarArea',
                    data: {
                        labels: contentData.types.labels,
                        datasets: [{
                            data: contentData.types.data,
                            backgroundColor: [
                                '#E5D0C0', '#D4C4B5', '#BFA68A', '#A89B91', '#8C8680',
                                '#7A726D', '#635D58', '#4A4540', '#E5D0C0'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }, // Hide legend for cleaner hero look
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.label;
                                    }
                                }
                            }
                        },
                        scales: {
                            r: {
                                ticks: { display: false },
                                grid: { color: '#e5e5e5' }
                            }
                        }
                    }
                });
            } else if (sectionId === 'community') {
                const ctx = document.getElementById('impactChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: contentData.stats.labels,
                        datasets: [{
                            label: '케이스 분포 (%)',
                            data: contentData.stats.data,
                            backgroundColor: '#BFA68A',
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    afterLabel: function(context) {
                                        return contentData.stats.descriptions[context.dataIndex];
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { display: false }
                            },
                            x: {
                                grid: { display: false }
                            }
                        }
                    }
                });
            }
        }

        // Initial render
        document.addEventListener('DOMContentLoaded', () => {
            renderSection('home');
        });

    </script>
</body>
</html>